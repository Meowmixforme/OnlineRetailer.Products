<mxfile host="app.diagrams.net" modified="2025-01-08T21:52:06.000Z" agent="5.0" version="24.7.17" etag="abc123" type="device">
  <diagram name="ThAmCo Level 2 - Fixed" id="c4acf3e9-155e-7222-9cf6-157b1a14988f">
    <mxGraphModel dx="2074" dy="1129" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="ThAmCo Online Retailer - Level 2 System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        
        <!-- Actors -->
        <mxCell id="actor1" value="&lt;b&gt;Anonymous User&lt;/b&gt;&lt;br&gt;[Person]&lt;br&gt;&lt;br&gt;Browses products and registers accounts" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#083F75;strokeColor=#06315C;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="160" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="actor2" value="&lt;b&gt;Registered User&lt;/b&gt;&lt;br&gt;[Person]&lt;br&gt;&lt;br&gt;Places orders and manages account" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#083F75;strokeColor=#06315C;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="280" y="100" width="160" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="actor3" value="&lt;b&gt;Staff&lt;/b&gt;&lt;br&gt;[Person]&lt;br&gt;&lt;br&gt;Manages inventory and processes orders" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#083F75;strokeColor=#06315C;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="800" y="100" width="160" height="120" as="geometry" />
        </mxCell>
        
        <!-- Web Applications -->
        <mxCell id="webapp1" value="&lt;b&gt;Customer Web App&lt;/b&gt;&lt;br&gt;[Container: ASP.NET Core MVC]&lt;br&gt;&lt;br&gt;Provides product browsing, user registration, and order placement" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="280" width="200" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="webapp2" value="&lt;b&gt;Staff Web App&lt;/b&gt;&lt;br&gt;[Container: ASP.NET Core MVC]&lt;br&gt;&lt;br&gt;Staff interface for inventory and order management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="780" y="280" width="200" height="100" as="geometry" />
        </mxCell>
        
        <!-- Microservices -->
        <mxCell id="ms1" value="&lt;b&gt;Customer Accounts&lt;/b&gt;&lt;br&gt;[Container: ASP.NET Core API]&lt;br&gt;&lt;br&gt;Handles user authentication and profile management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="40" y="450" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="ms2" value="&lt;b&gt;Staff Accounts&lt;/b&gt;&lt;br&gt;[Container: ASP.NET Core API]&lt;br&gt;&lt;br&gt;Manages staff authentication and roles" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="260" y="450" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="ms3" value="&lt;b&gt;Products Microservice&lt;/b&gt;&lt;br&gt;[Container: ASP.NET Core API]&lt;br&gt;&lt;br&gt;Product catalog CRUD operations" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="480" y="450" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="ms4" value="&lt;b&gt;Orders Microservice&lt;/b&gt;&lt;br&gt;[Container: ASP.NET Core API]&lt;br&gt;&lt;br&gt;Order creation and management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="700" y="450" width="180" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="ms5" value="&lt;b&gt;Stock Microservice&lt;/b&gt;&lt;br&gt;[Container: ASP.NET Core API]&lt;br&gt;&lt;br&gt;Inventory and stock level management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="920" y="450" width="180" height="100" as="geometry" />
        </mxCell>
        
        <!-- Databases -->
        <mxCell id="db1" value="&lt;b&gt;Customer Database&lt;/b&gt;&lt;br&gt;[Container: SQL Server]&lt;br&gt;&lt;br&gt;Customer account data" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="60" y="620" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="db2" value="&lt;b&gt;Staff Database&lt;/b&gt;&lt;br&gt;[Container: SQL Server]&lt;br&gt;&lt;br&gt;Staff account data" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="280" y="620" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="db3" value="&lt;b&gt;Products Database&lt;/b&gt;&lt;br&gt;[Container: SQL Server]&lt;br&gt;&lt;br&gt;Product catalog data" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="500" y="620" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="db4" value="&lt;b&gt;Orders Database&lt;/b&gt;&lt;br&gt;[Container: SQL Server]&lt;br&gt;&lt;br&gt;Order transaction data" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="720" y="620" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="db5" value="&lt;b&gt;Stock Database&lt;/b&gt;&lt;br&gt;[Container: SQL Server]&lt;br&gt;&lt;br&gt;Inventory level data" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="940" y="620" width="140" height="100" as="geometry" />
        </mxCell>
        
        <!-- External Systems -->
        <mxCell id="ext1" value="&lt;b&gt;Email Service&lt;/b&gt;&lt;br&gt;[External System]&lt;br&gt;&lt;br&gt;Sends order confirmations and notifications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#8C8496;strokeColor=#736782;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1150" y="200" width="160" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="ext2" value="&lt;b&gt;Payment Gateway&lt;/b&gt;&lt;br&gt;[External System]&lt;br&gt;&lt;br&gt;Processes payment transactions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#8C8496;strokeColor=#736782;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1150" y="330" width="160" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="ext3" value="&lt;b&gt;Product Supplier&lt;/b&gt;&lt;br&gt;[External System]&lt;br&gt;&lt;br&gt;Provides product and stock updates" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#8C8496;strokeColor=#736782;fontColor=#ffffff;verticalAlign=middle;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1150" y="460" width="160" height="100" as="geometry" />
        </mxCell>
        
        <!-- Relationships - Users to Web Apps -->
        <mxCell id="rel1" value="Browses products&lt;br&gt;[HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="actor1" target="webapp1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="160" y="240" as="sourcePoint" />
            <mxPoint x="170" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel2" value="Places orders&lt;br&gt;[HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="actor2" target="webapp1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="240" as="sourcePoint" />
            <mxPoint x="270" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel3" value="Manages inventory&lt;br&gt;[HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="actor3" target="webapp2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="240" as="sourcePoint" />
            <mxPoint x="880" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Web Apps to Microservices -->
        <mxCell id="rel4" value="User authentication&lt;br&gt;[JSON/HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="webapp1" target="ms1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="390" as="sourcePoint" />
            <mxPoint x="130" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel5" value="Product catalog&lt;br&gt;[JSON/HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="webapp1" target="ms3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="390" as="sourcePoint" />
            <mxPoint x="570" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel6" value="Order creation&lt;br&gt;[JSON/HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="webapp1" target="ms4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="270" y="390" as="sourcePoint" />
            <mxPoint x="745" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel7" value="Staff authentication&lt;br&gt;[JSON/HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="webapp2" target="ms2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="830" y="390" as="sourcePoint" />
            <mxPoint x="350" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel8" value="Stock management&lt;br&gt;[JSON/HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="webapp2" target="ms5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="930" y="390" as="sourcePoint" />
            <mxPoint x="1010" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Microservices to Databases -->
        <mxCell id="rel9" value="Read/Write customer data&lt;br&gt;[T-SQL]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms1" target="db1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="130" y="560" as="sourcePoint" />
            <mxPoint x="130" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel10" value="Read/Write staff data&lt;br&gt;[T-SQL]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms2" target="db2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="560" as="sourcePoint" />
            <mxPoint x="350" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel11" value="Read/Write product data&lt;br&gt;[T-SQL]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms3" target="db3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="560" as="sourcePoint" />
            <mxPoint x="570" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel12" value="Read/Write order data&lt;br&gt;[T-SQL]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms4" target="db4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="790" y="560" as="sourcePoint" />
            <mxPoint x="790" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel13" value="Read/Write stock data&lt;br&gt;[T-SQL]" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms5" target="db5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1010" y="560" as="sourcePoint" />
            <mxPoint x="1010" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Microservice Interactions -->
        <mxCell id="rel14" value="Validate stock levels&lt;br&gt;[JSON/HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms4" target="ms5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="500" as="sourcePoint" />
            <mxPoint x="920" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel15" value="Get product details&lt;br&gt;[JSON/HTTPS]" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms4" target="ms3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="525" as="sourcePoint" />
            <mxPoint x="660" y="525" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- External System Connections -->
        <mxCell id="rel16" value="Send order confirmations&lt;br&gt;[SMTP]" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms4" target="ext1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="475" as="sourcePoint" />
            <mxPoint x="1150" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel17" value="Process payments&lt;br&gt;[HTTPS/API]" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ms4" target="ext2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="500" as="sourcePoint" />
            <mxPoint x="1150" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="rel18" value="Receive stock updates&lt;br&gt;[HTTPS/API]" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="1" source="ext3" target="ms5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1150" y="510" as="sourcePoint" />
            <mxPoint x="1100" y="525" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend" value="&lt;b&gt;Legend&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="760" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend1" value="Person" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#083F75;strokeColor=#06315C;fontColor=#ffffff;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="790" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend2" value="Container" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="150" y="790" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend3" value="Database" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#23A2D9;strokeColor=#0E7DAD;fontColor=#ffffff;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="790" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="legend4" value="External System" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#8C8496;strokeColor=#736782;fontColor=#ffffff;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="350" y="790" width="100" height="30" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
